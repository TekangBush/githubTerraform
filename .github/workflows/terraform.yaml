name: terraform workflow
on:
    push:
        branches: 
            - main
            - dev
    workflow_dispatch: 
env:
    ARM_CLIENT_ID: ${{secrets.ARM_CLIENT_ID}}
    ARM_CLIENT_SECRET: ${{secrets.ARM_CLIENT_SECRET}}
    ARM_SUBSCRIPTION_ID: ${{secrets.ARM_SUBSCRIPTION_ID}}
    ARM_TENANT_ID: ${{secrets.ARM_TENANT_ID}}
    TERRAFORM_WORKING_DIRECTORY: main
jobs:
    terraform:
        environment: 
            name: Dev
        runs-on: ubuntu-latest
        steps:
            - name: üçècheckout
              uses: actions/checkout@v2
            - name: üçèSetup Terraform
              uses: hashicorp/setup-terraform@v2
            - name: üçè Terraform version
              run: |
               terraform --version
            - name: üçè Terraform init
              run: |
                terraform init 
              working-directory: ./${{env.TERRAFORM_WORKING_DIRECTORY}}
            - name: üçècall a sec
              run: |
                echo "${{env.ARM_CLIENT_ID}}"
            - name: üçè Terraform plan 
              run: |
                terraform plan 
              working-directory: ./${{env.TERRAFORM_WORKING_DIRECTORY}}